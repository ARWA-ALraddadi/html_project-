<html>
<head>
    <script>

    function makeAjaxQueryMarket(){
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        readyStateChangeHandler(xhttp);
      }
      xhttp.open("GET", "Question2.json", true);
      xhttp.send();
    }


    function readyStateChangeHandler(xhttp){
      if (xhttp.readyState == 4){
        if(xhttp.status == 200){

          handleStatusSuccess(xhttp);

        }else{
          handleStatusFailure(xhttp);  }}}

    function handleStatusFailure(xhttp){

      var displayDiv = document.getElementById("display");

      displayDiv.innerHTML = "XMLHttpRequest failed: status " + xhttp.status;}


    function handleStatusSuccess(xhttp){

      var jsonText = xhttp.responseText;

      var marketObj = JSON.parse(jsonText);

      displayMarket(marketObj);}


    function displayMarket(marketObj){
      var html = "<h1> Search result </h1><p>Search keyword</p>" + marketObj.searchKeyword + "<br>" ;
      html += "<table border='1' width = 75% text-align= left >";

      for(var i=0; i < marketObj.videoList.length; i++){

        var stockObj = marketObj.videoList[i];
        html += "<tr>";

        html += "<td> <a href='"+ stockObj.link  + "' target='_blank'>";
        html += "<img width='200' src='"+stockObj.image +" '> </a> </td>";
        html += "<td><h2 style='color:Tomato;'>"+stockObj.title + "</h2>";
        html += stockObj.channel + "<br>"+ stockObj.view+"<br><mark> "  ;
        html += stockObj.length +"</mark></td></tr>";
      } ;

        html += "</table>";
      var displayDiv = document.getElementById("display");
      displayDiv.innerHTML = html;
    }
  </script>
</head>
<body>
  <button  onClick="makeAjaxQueryMarket()" > Get Search Result</button>
  <br> <br>
  <div id="display"> </div>

  <table border="1" width = 75% text-align= left >

    <tr>
      <td> <a href= 'http://www.youtube.com/watch?v=kbKtN71Lfs' target="_blank"> <img width="200" onclick="openvideo()" src="http://i.ytimg.com/vi/kbKtFN71Lfs/0.jpg" > </a> </td>

      <td>
        <h1 style="color:Tomato;">Chaos Game</h1>
        channel <br>
        view <br>
        <mark>length </mark>
      </td>

    </tr>
    <tr>
      <td> <a href="http://www.youtube.com/watch?v=kbKtFN71Lfs" target='_blank'> <img width="200" onclick="openvideo()" src="http://i.ytimg.com/vi/kbKtFN71Lfs/0.jpg" > </a> </td>

      <td><h2 style="color:Tomato; "> Australian Story: Meet Eddie Woo, the maths teacher you wish you&apos;d had in high school </h2>
        channel <br>
        view <br>
          <mark>length </mark>
      </td>

    </tr>
    <tr>
      <td> <img width="200" onclick="openvideo()" src="" >  </td>

      <td>
        <h4 style="color:Tomato;">Ham Sandwich Problem</h4>
        <p>  channel </p>
        <p> view</p>
        <p style=" color:white;background-color:rgb(0, 0, 0);"> length </p>
      </td>

    </tr>
  </table>
</body>

</html>
